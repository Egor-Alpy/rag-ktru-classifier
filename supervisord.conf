[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10
loglevel=info
user=root

[program:qdrant]
command=/usr/local/bin/qdrant
stdout_logfile=/var/log/qdrant.log
stderr_logfile=/var/log/qdrant.err
autostart=true
autorestart=true
startsecs=10
priority=10

[program:embeddings]
directory=/app/embeddings
command=uvicorn app.main:app --host 0.0.0.0 --port 8080
environment=PYTHONPATH="/app"
stdout_logfile=/var/log/embedding.log
stderr_logfile=/var/log/embedding.err
autostart=true
autorestart=true
startsecs=5
priority=20
startretries=5

[program:llm]
directory=/app/llm
command=uvicorn app.main:app --host 0.0.0.0 --port 8081
environment=PYTHONPATH="/app"
stdout_logfile=/var/log/llm.log
stderr_logfile=/var/log/llm.err
autostart=true
autorestart=true
startsecs=5
priority=30
startretries=5

[program:api]
directory=/app/api
command=uvicorn app.main:app --host 0.0.0.0 --port 8000
environment=PYTHONPATH="/app"
stdout_logfile=/var/log/api.log
stderr_logfile=/var/log/api.err
autostart=true
autorestart=true
startsecs=5
priority=40
startretries=5